<!DOCTYPE html>
<html lang="en">

<head>
	<link rel="shortcut icon" href="">
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
	<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\" />
	<title>CADDeck Configurator</title>
	<link rel="stylesheet" type="text/css" href="style.css">

	<script src="jquery-3.5.1.slim.min.js"></script>
</head>

<body>
	<!-- <div id="contentloading" class="pageloading"> Loading the configurator.</div> -->

	<div id="contentloading" class="pageloading">
		Loading Configurator
	</div>

	<div id="ball-loader" class="ball-loader">

		<div class="ball-loader-ball ball1"></div>
		<div class="ball-loader-ball ball2"></div>
		<div class="ball-loader-ball ball3"></div>
	</div>

	<div id="maincontent" style="display: none;">
		<h1>CADDeck Configurator</h1>
		<form class="form" method="post" action='/upload' id="uploadfile" enctype="multipart/form-data"></form>
		<form class="form" method="post" action='/uploadJSON' id="uploadjsonfile" enctype="multipart/form-data"></form>
		<form class="form" method="get" action='/downloadJSON' id="downloadjsonfile"></form>

		<!-- Menu -->
		<div class="tab">
			<button class="tablinks" onclick="openMenu(event, 'wifi')">WiFi</button>
			<button class="tablinks" onclick="openMenu(event, 'general')">Settings</button>
			<button class="tablinks" onclick="openMenu(event, 'menu')">Menu</button>
			<button class="tablinks" onclick="openMenu(event, 'cadparams')">CAD Parameters</button>
			<button class="tablinks" onclick="openMenu(event, 'uploadimage')">Upload logo</button>

			<form method='post' action='/restart'>
				<button style="float: right;"
					onclick="return confirm('Are you sure? Unsaved configuration will be lost!')" class="tablinks">
					Restart </button>
			</form>

			<button style="float: right;" class="tablinks" onclick="openMenu(event, 'info')">Info</button>

			<button style="float: right;" class="tablinks" onclick="openMenu(event, 'editor')">File editor</button>

			<button style="float: right;" class="tablinks" onclick="openMenu(event, 'uploadjson')">Upload Menu
				Config</button>

			<button style="float: right;" class="tablinks" onclick="openMenu(event, 'downloadjson')">Download Menu
				Config</button>
		</div>

		<!-- Tab Intro -->
		<div id="intro" class="tabcontent">
			<h3>Welcome</h3>
			<p>
				Welcome to the configurator! Select an option/page from the top menu. If you have any questions,
				join my
				Discord server: <a href="https://discord.gg/RE3XevS"
					target="_blank">https://discord.gg/RE3XevS</a><br />
				A guide on how to use the configurator can be found here: <a
					href="https://github.com/DustinWatts/FreeTouchDeck/wiki/3.-The-Configurator" target="_blank">
					FreeTouchDeck Wiki</a>
			</p>
		</div>
		<!-- Tab WiFi -->
		<div id="wifi" class="tabcontent">
			<div style="float: right; font-size: 11px"><a href="/download?file=wificonfig.json">download
					wificonfig.json</a></div><br>
			<h3>WiFi Settings</h3>
			<p>
			<form method='post' id="savewifi" action='/saveconfig'>



				<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">

					<label for="ssid">WiFi SSID:</label><br>
					<input type="text" id="ssid" name="ssid"><br><br>

					<label for="password">WiFi Password:</label><br>
					<input type="password" id="password" name="password" autocomplete="new-password"><br>
					<input type="checkbox" onclick="togglepassword()">Show Password <br><br>

					&nbsp;&nbsp;Wifi Mode:&nbsp;
					<select class="wifimode" id='wifimode' name='wifimode'>
						<option value="WIFI_STA">Station</option>
						<option value="WIFI_AP">Access Point</option>
					</select><br>

					<label for="wifihostname">Wifi Hostname:</label>
					<input type="text" id="wifihostname" name="wifihostname"><br>

					&nbsp;&nbsp;Connection attempts:&nbsp;
					<select class="attempts" id='attempts' name='attempts'>
						<option value="5">5</option>
						<option value="10">10</option>
						<option value="15">15</option>
						<option value="20">20</option>
					</select><br>

					&nbsp;&nbsp;Delay between attempts:&nbsp;
					<select class="attemptdelay" id='attemptdelay' name='attemptdelay'>
						<option value="100">100 ms</option>
						<option value="500">500 ms</option>
						<option value="1000">1000 ms</option>
						<option value="2000">2000 ms</option>
					</select><br>
				</div>

				<div class="form" style="width: 50%; text-align: : center; margin: auto;">
					<input type="hidden" id='save' name='save' value="wifi">
					<br /><button style='cursor: pointer;' form="savewifi" type='save'>Save WiFi Config</button>
				</div>
			</form>

		</div>
		</p>
	</div>
	<!-- Tab General -->
	<div id="general" class="tabcontent">
		<div style="float: right; font-size: 11px"><a href="/download?file=general.json">download general.json</a>
		</div>
		<br>
		<h3>General Settings</h3>
		<p>
		<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
			<h2>Colors</h2>
		</div>

		<form method='post' id="generalconfig" action='/saveconfig'>
			<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
				&nbsp;&nbsp;Menu Button Colour:&nbsp;
				<input style='width: 100px; height: 30px; padding:1px; border-radius:0.3rem;' id='menubuttoncolor'
					name='menubuttoncolor' type="color" value=''>
				&nbsp;&nbsp;Function Button Colour:&nbsp;
				<input style='width: 100px; height: 30px; padding:1px; border-radius:0.3rem;' id='functionbuttoncolor'
					name='functionbuttoncolor' type="color" value=''>
				&nbsp;&nbsp;Latch Colour:&nbsp;
				<input style='width: 100px; height: 30px; padding:1px; border-radius:0.3rem;' id='latchcolor'
					name='latchcolor' type="color" value=''>
				&nbsp;&nbsp;Background Colour:&nbsp;
				<input style='width: 100px; height: 30px; padding:1px; border-radius:0.3rem;' id='background'
					name='background' type="color" value=''>
			</div><br>

			<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
				<h2>Deep Sleep</h2>
			</div>

			&nbsp;&nbsp;Deep Sleep:&nbsp;
			<select class="sleepenable" id='sleepenable' name='sleepenable'>
				<option value="true">Enabled</option>
				<option value="false">Disabled</option>
			</select>
			&nbsp;&nbsp;Deep Sleep Timer:&nbsp;
			<select class="sleeptimer" id='sleeptimer' name='sleeptimer'>
				<option value="10">10 Minutes</option>
				<option value="20">20 Minutes</option>
				<option value="30">30 Minutes</option>
				<option value="60">60 Minutes</option>
			</select>
			&nbsp;&nbsp;USB Comms:&nbsp;
			<select class="usbcommsenable" id='usbcommsenable' name='usbcommsenable'>
				<option value="true">Enabled</option>
				<option value="false">Disabled</option>
			</select>
			<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
				<h2>Sound</h2>
			</div>

			&nbsp;&nbsp;Beep on Touch:&nbsp;
			<select class="sleepenable" id='beep' name='beep'>
				<option value="true">Enabled</option>
				<option value="false">Disabled</option>
			</select>

			<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
				<h2>CADDeck Helpers</h2>
			</div>

			&nbsp;&nbsp;Modifier 1:&nbsp;
			<select class="modifier1" id='modifier1' name='modifier1'>
				<option value="0">None</option>
				<option value="128">CTRL</option>
				<option value="129">SHIFT</option>
				<option value="130">ALT</option>
				<option value="131">GUI</option>
			</select>

			&nbsp;&nbsp;Modifier 2:&nbsp;
			<select class="modifier2" id='modifier2' name='modifier2'>
				<option value="0">None</option>
				<option value="128">CTRL</option>
				<option value="129">SHIFT</option>
				<option value="130">ALT</option>
				<option value="131">GUI</option>
			</select>

			&nbsp;&nbsp;Modifier 3:&nbsp;
			<select class="modifier3" id='modifier3' name='modifier3'>
				<option value="0">None</option>
				<option value="128">CTRL</option>
				<option value="129">SHIFT</option>
				<option value="130">ALT</option>
				<option value="131">GUI</option>
			</select>

			<br>

			&nbsp;&nbsp;Delay after helper (ms):&nbsp;
			<select class="helperdelay" id='helperdelay' name='helperdelay'>
				<option value="0">0</option>
				<option value="100">100</option>
				<option value="200">200</option>
				<option value="500">500</option>
				<option value="1000">1000</option>
			</select>


			&nbsp;&nbsp;Menu on startup:&nbsp;
			<select class="startup_menu" id='startup_menu' name='startup_menu'>
				<option value="0">0</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
				<option value="6">6</option>
				<option value="7">7</option>
				<option value="8">8</option>
				<option value="9">9</option>
			</select>

			<div class="form" style="width: 50%; text-align: : center; margin: auto;">
				<input type="hidden" id='save' name='save' value="general">
				<br /><button style='cursor: pointer;' form="generalconfig" type='save'>Save General Config</button>
			</div>
		</form>
	</div>
	</p>
	</div>
	<!-- Tab Menu -->
	<div id="menu" class="tabcontent">
		<div style="float: right; font-size: 11px"><a href="/download?file=menu1.json">download menu1.json</a></div>
		<br>
		<h3>Menu</h3>
		<p>
		<form method='post' id="savemenu" action='/saveconfig'>
			<label for="framework">Select Menu</label>
			<select name="menunumberlist_save" id="menunumberlist_save" onchange="updateMenuItems(this)">
				<option value="0">Home Menu</option>
				<option value="1">Menu 1</option>
				<option value="2">Menu 2</option>
				<option value="3">Menu 3</option>
				<option value="4">Menu 4</option>
				<option value="5">Menu 5</option>
				<option value="6">Menu 6</option>
				<option value="7">Menu 7</option>
				<option value="8">Menu 8</option>
				<option value="9">Menu 9</option>
			</select>
			<div></div> <!-- Add a little space -->
			<label for="menuname">Menu Name:</label>
			<input type="text" id="menuname" name="menuname"><br><br>
			<div></div> <!-- Add a little space -->
			<table style="height: 250px; width: 100%; border: 1px solid #000088; text-align: left;">
				<tbody>
					<tr>
						<td style="width: 10%;">
							Row/Col
						</td>
						<td style="width: 18%;">
							Col 1
						</td>
						<td style="width: 18%;">
							Col 2
						</td>
						<td style="width: 18%;">
							Col 3
						</td>
						<td style="width: 18%;">
							Col 4
						</td>
						<td style="width: 18%;">
							Col 5
						</td>
					</tr>
					<tr>
						<td style="width: 10%;">
							Row 1
						</td>
						<td style="width: 18%;">
							Button 1-1
							<br />Image:
							<select class="images" id='button11logo' name='button11logo'></select>
							<br />Action 1:
							<select class="actions" id='button11action0' name='button11action0'></select>
							<select class="actions" id='button11value0' name='button11value0'></select>
							<br />Action 2:
							<select class="actions" id='button11action1' name='button11action1'></select>
							<select class="actions" id='button11value1' name='button11value1'></select>
							<br />Action 3:
							<select class="actions" id='button11action2' name='button11action2'></select>
							<select class="actions" id='button11value2' name='button11value2'></select>
							<br />Latch? <input type="checkbox" id="button11latch" name="button11latch">
							latch to: <select class="images" id='button11latchlogo' name='button11latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 1-2
							<br />Image:
							<select class="images" id='button12logo' name='button12logo'></select>
							<br />Action 1:
							<select class="actions" id='button12action0' name='button12action0'></select>
							<select class="actions" id='button12value0' name='button12value0'></select>
							<br />Action 2:
							<select class="actions" id='button12action1' name='button12action1'></select>
							<select class="actions" id='button12value1' name='button12value1'></select>
							<br />Action 3:
							<select class="actions" id='button12action2' name='button12action2'></select>
							<select class="actions" id='button12value2' name='button12value2'></select>
							<br />Latch? <input type="checkbox" id="button12latch" name="button12latch">
							latch to: <select class="images" id='button12latchlogo' name='button12latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 1-3
							<br />Image:
							<select class="images" id='button13logo' name='button13logo'></select>
							<br />Action 1:
							<select class="actions" id='button13action0' name='button13action0'></select>
							<select class="actions" id='button13value0' name='button13value0'></select>
							<br />Action 2:
							<select class="actions" id='button13action1' name='button13action1'></select>
							<select class="actions" id='button13value1' name='button13value1'></select>
							<br />Action 3:
							<select class="actions" id='button13action2' name='button13action2'></select>
							<select class="actions" id='button13value2' name='button13value2'></select>
							<br />Latch? <input type="checkbox" id="button13latch" name="button13latch">
							latch to: <select class="images" id='button13latchlogo' name='button13latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 1-4
							<br />Image:
							<select class="images" id='button14logo' name='button14logo'></select>
							<br />Action 1:
							<select class="actions" id='button14action0' name='button14action0'></select>
							<select class="actions" id='button14value0' name='button14value0'></select>
							<br />Action 2:
							<select class="actions" id='button14action1' name='button14action1'></select>
							<select class="actions" id='button14value1' name='button14value1'></select>
							<br />Action 3:
							<select class="actions" id='button14action2' name='button14action2'></select>
							<select class="actions" id='button14value2' name='button14value2'></select>
							<br />Latch? <input type="checkbox" id="button14latch" name="button14latch">
							latch to: <select class="images" id='button14latchlogo' name='button14latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 1-5
							<br />Image:
							<select class="images" id='button15logo' name='button15logo'></select>
							<br />Action 1:
							<select class="actions" id='button15action0' name='button15action0'></select>
							<select class="actions" id='button15value0' name='button15value0'></select>
							<br />Action 2:
							<select class="actions" id='button15action1' name='button15action1'></select>
							<select class="actions" id='button15value1' name='button15value1'></select>
							<br />Action 3:
							<select class="actions" id='button15action2' name='button15action2'></select>
							<select class="actions" id='button15value2' name='button15value2'></select>
							<br />Latch? <input type="checkbox" id="button15latch" name="button15latch">
							latch to: <select class="images" id='button15latchlogo' name='button15latchlogo'></select>
						</td>
					</tr>
					<tr>
						<td style="width: 10%;">
							Row 2
						</td>
						<td style="width: 18%;">
							Button 2-1
							<br />Image:
							<select class="images" id='button21logo' name='button21logo'></select>
							<br />Action 1:
							<select class="actions" id='button21action0' name='button21action0'></select>
							<select class="actions" id='button21value0' name='button21value0'></select>
							<br />Action 2:
							<select class="actions" id='button21action1' name='button21action1'></select>
							<select class="actions" id='button21value1' name='button21value1'></select>
							<br />Action 3:
							<select class="actions" id='button21action2' name='button21action2'></select>
							<select class="actions" id='button21value2' name='button21value2'></select>
							<br />Latch? <input type="checkbox" id="button21latch" name="button21latch">
							latch to: <select class="images" id='button21latchlogo' name='button21latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 2-2
							<br />Image:
							<select class="images" id='button22logo' name='button22logo'></select>
							<br />Action 1:
							<select class="actions" id='button22action0' name='button22action0'></select>
							<select class="actions" id='button22value0' name='button22value0'></select>
							<br />Action 2:
							<select class="actions" id='button22action1' name='button22action1'></select>
							<select class="actions" id='button22value1' name='button22value1'></select>
							<br />Action 3:
							<select class="actions" id='button22action2' name='button22action2'></select>
							<select class="actions" id='button22value2' name='button22value2'></select>
							<br />Latch? <input type="checkbox" id="button22latch" name="button22latch">
							latch to: <select class="images" id='button22latchlogo' name='button22latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 2-3
							<br />Image:
							<select class="images" id='button23logo' name='button23logo'></select>
							<br />Action 1:
							<select class="actions" id='button23action0' name='button23action0'></select>
							<select class="actions" id='button23value0' name='button23value0'></select>
							<br />Action 2:
							<select class="actions" id='button23action1' name='button23action1'></select>
							<select class="actions" id='button23value1' name='button23value1'></select>
							<br />Action 3:
							<select class="actions" id='button23action2' name='button23action2'></select>
							<select class="actions" id='button23value2' name='button23value2'></select>
							<br />Latch? <input type="checkbox" id="button23latch" name="button23latch">
							latch to: <select class="images" id='button23latchlogo' name='button23latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 2-4
							<br />Image:
							<select class="images" id='button24logo' name='button24logo'></select>
							<br />Action 1:
							<select class="actions" id='button24action0' name='button24action0'></select>
							<select class="actions" id='button24value0' name='button24value0'></select>
							<br />Action 2:
							<select class="actions" id='button24action1' name='button24action1'></select>
							<select class="actions" id='button24value1' name='button24value1'></select>
							<br />Action 3:
							<select class="actions" id='button24action2' name='button24action2'></select>
							<select class="actions" id='button24value2' name='button24value2'></select>
							<br />Latch? <input type="checkbox" id="button24latch" name="button24latch">
							latch to: <select class="images" id='button24latchlogo' name='button24latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 2-5
							<br />Image:
							<select class="images" id='button25logo' name='button25logo'></select>
							<br />Action 1:
							<select class="actions" id='button25action0' name='button25action0'></select>
							<select class="actions" id='button25value0' name='button25value0'></select>
							<br />Action 2:
							<select class="actions" id='button25action1' name='button25action1'></select>
							<select class="actions" id='button25value1' name='button25value1'></select>
							<br />Action 3:
							<select class="actions" id='button25action2' name='button25action2'></select>
							<select class="actions" id='button25value2' name='button25value2'></select>
							<br />Latch? <input type="checkbox" id="button25latch" name="button25latch">
							latch to: <select class="images" id='button25latchlogo' name='button25latchlogo'></select>
						</td>
					</tr>
					<tr>
						<td style="width: 10%;">
							Row 3
						</td>
						<td style="width: 18%;">
							Button 3-1
							<br />Image:
							<select class="images" id='button31logo' name='button31logo'></select>
							<br />Action 1:
							<select class="actions" id='button31action0' name='button31action0'></select>
							<select class="actions" id='button31value0' name='button31value0'></select>
							<br />Action 2:
							<select class="actions" id='button31action1' name='button31action1'></select>
							<select class="actions" id='button31value1' name='button31value1'></select>
							<br />Action 3:
							<select class="actions" id='button31action2' name='button31action2'></select>
							<select class="actions" id='button31value2' name='button31value2'></select>
							<br />Latch? <input type="checkbox" id="button31latch" name="button31latch">
							latch to: <select class="images" id='button31latchlogo' name='button31latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 3-2
							<br />Image:
							<select class="images" id='button32logo' name='button32logo'></select>
							<br />Action 1:
							<select class="actions" id='button32action0' name='button32action0'></select>
							<select class="actions" id='button32value0' name='button32value0'></select>
							<br />Action 2:
							<select class="actions" id='button32action1' name='button32action1'></select>
							<select class="actions" id='button32value1' name='button32value1'></select>
							<br />Action 3:
							<select class="actions" id='button32action2' name='button32action2'></select>
							<select class="actions" id='button32value2' name='button32value2'></select>
							<br />Latch? <input type="checkbox" id="button32latch" name="button32latch">
							latch to: <select class="images" id='button32latchlogo' name='button32latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 3-3
							<br />Image:
							<select class="images" id='button33logo' name='button33logo'></select>
							<br />Action 1:
							<select class="actions" id='button33action0' name='button33action0'></select>
							<select class="actions" id='button33value0' name='button33value0'></select>
							<br />Action 2:
							<select class="actions" id='button33action1' name='button33action1'></select>
							<select class="actions" id='button33value1' name='button33value1'></select>
							<br />Action 3:
							<select class="actions" id='button33action2' name='button33action2'></select>
							<select class="actions" id='button33value2' name='button33value2'></select>
							<br />Latch? <input type="checkbox" id="button33latch" name="button33latch">
							latch to: <select class="images" id='button33latchlogo' name='button33latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 3-4
							<br />Image:
							<select class="images" id='button34logo' name='button34logo'></select>
							<br />Action 1:
							<select class="actions" id='button34action0' name='button34action0'></select>
							<select class="actions" id='button34value0' name='button34value0'></select>
							<br />Action 2:
							<select class="actions" id='button34action1' name='button34action1'></select>
							<select class="actions" id='button34value1' name='button34value1'></select>
							<br />Action 3:
							<select class="actions" id='button34action2' name='button34action2'></select>
							<select class="actions" id='button34value2' name='button34value2'></select>
							<br />Latch? <input type="checkbox" id="button34latch" name="button34latch">
							latch to: <select class="images" id='button34latchlogo' name='button34latchlogo'></select>
						</td>
						<td style="width: 18%;">
							Button 3-5
							<br />Image:
							<select class="images" id='button35logo' name='button35logo'></select>
							<br />Action 1:
							<select class="actions" id='button35action0' name='button35action0'></select>
							<select class="actions" id='button35value0' name='button35value0'></select>
							<br />Action 2:
							<select class="actions" id='button35action1' name='button35action1'></select>
							<select class="actions" id='button35value1' name='button35value1'></select>
							<br />Action 3:
							<select class="actions" id='button35action2' name='button35action2'></select>
							<select class="actions" id='button35value2' name='button35value2'></select>
							<br />Latch? <input type="checkbox" id="button35latch" name="button35latch">
							latch to: <select class="images" id='button35latchlogo' name='button35latchlogo'></select>
						</td>
					</tr>
				</tbody>
			</table>
			<div class="form" style="width: 50%; text-align: : center; margin: auto;">
				<input type="hidden" id='save' name='save' value="menu">
				<br /><button style='cursor: pointer;' form="savemenu" type='save'>Save Menu Config</button>
		</form>
	</div>
	</p>
	</div>
	<!-- Tab CADParams -->
	<div id="cadparams" class="tabcontent">
		<div style="float: right; font-size: 11px"><a href="/download?file=cadparams.json">download cadparams.json</a>
		</div>
		<br>
		<h3>CAD Settings</h3>
		<p>

		<form method='post' id="cadparamsconfig" action='/saveconfig'>

			&nbsp;&nbsp;Current CAD Program:&nbsp;
			<select name="current_program" id='current_program'>
				<option value="0">Solidworks</option>
				<option value="1">Fusion360</option>
				<option value="2">Blender</option>
				<option value="3">FreeCAD</option>
				<option value="4">AC3D</option>
			</select>
			<br><br>

			&nbsp;&nbsp;Joystick Scale X:&nbsp;
			<input type="number" id="joy_scale_x" name="joy_scale_x" min="-5.0" max="5.0" value="3.00" step="any">

			&nbsp;&nbsp;Joystick Scale Y:&nbsp;
			<input type="number" id="joy_scale_y" name="joy_scale_y" min="-5.0" max="5.0" value="3.00" step="any">

			&nbsp;&nbsp;Joystick Deadzone:&nbsp;
			<select class="joy_deadzone" id='joy_deadzone' name='joy_deadzone'>
				<option value="0">0</option>
				<option value="0.01">0.01</option>
				<option value="0.02">0.02</option>
				<option value="0.05">0.05</option>
				<option value="0.1">0.1</option>
			</select>
			&nbsp;&nbsp;Joystick Sensitivity:&nbsp;
			<select class="joy_sensitivity" id='joy_sensitivity' name='joy_sensitivity'>
				<option value="5">5</option>
				<option value="10">10</option>
				<option value="20">20</option>
				<option value="50">50</option>
				<option value="100">100</option>
				<option value="200">200</option>
			</select>
			<br><br>
			&nbsp;&nbsp;Zoom Scale:&nbsp;
			<input type="number" id="zoom_scale" name="zoom_scale" min="-5.0" max="5.0" value="3.00" step="any">
			&nbsp;&nbsp;Zoom Deadzone:&nbsp;
			<select class="zoom_deadzone" id='zoom_deadzone' name='zoom_deadzone'>
				<option value="0">0</option>
				<option value="0.01">0.01</option>
				<option value="0.02">0.02</option>
				<option value="0.05">0.05</option>
				<option value="0.1">0.1</option>
			</select>
			&nbsp;&nbsp;Zoom Sensitivity:&nbsp;
			<select class="zoom_sensitivity" id='zoom_sensitivity' name='zoom_sensitivity'>
				<option value="5">5</option>
				<option value="10">10</option>
				<option value="20">20</option>
				<option value="50">50</option>
				<option value="100">100</option>
				<option value="200">200</option>
			</select>
			<br><br>
			&nbsp;&nbsp;Rotate Scale:&nbsp;
			<input type="number" id="rotate_scale" name="rotate_scale" min="-5.0" max="5.0" value="3.00" step="any">
			&nbsp;&nbsp;Rotate Deadzone:&nbsp;
			<select class="rotate_deadzone" id='rotate_deadzone' name='rotate_deadzone'>
				<option value="0">0</option>
				<option value="0.01">0.01</option>
				<option value="0.02">0.02</option>
				<option value="0.05">0.05</option>
				<option value="0.1">0.1</option>
			</select>
			&nbsp;&nbsp;Rotate Sensitivity:&nbsp;
			<select class="rotate_sensitivity" id='rotate_sensitivity' name='rotate_sensitivity'>
				<option value="5">5</option>
				<option value="10">10</option>
				<option value="20">20</option>
				<option value="50">50</option>
				<option value="100">100</option>
				<option value="200">200</option>
			</select>
			<br><br>
			&nbsp;&nbsp;Steady Time (ms):&nbsp;
			<select class="joy_steady_time" id='joy_steady_time' name='joy_steady_time'>
				<option value="50">50</option>
				<option value="100">100</option>
				<option value="150">150</option>
				<option value="200">200</option>
				<option value="250">250</option>
			</select>

			<br><br>
			<table style="height: 250px; width: 100%; border: 1px solid #000088; text-align: left;">
				<tbody>
					<tr>
						<!-- <td style="width: 50%;"> -->
						<td>

							<!-- Image Map Generated by http://www.image-map.net/ -->
							<img src="ButtonLayout10.png" usemap="#image-map">

							<map name="image-map">
								<area target="" alt="Button 0" title="Button 0" href="#" coords="247,133,285,166"
									shape="rect" onclick="select_new_button(0)">
								<area target="" alt="Button 1" title="Button 1" href="#" coords="67,74,103,110"
									shape="rect" onclick="select_new_button(1)">
								<area target="" alt="Button 2" title="Button 2" href="#" coords="120,74,151,106"
									shape="rect" onclick="select_new_button(2)">
								<area target="" alt="Button 3" title="Button 3" href="#" coords="63,125,101,164"
									shape="rect" onclick="select_new_button(3)">
								<area target="" alt="Button 4" title="Button 4" href="#" coords="116,131,156,165"
									shape="rect" onclick="select_new_button(4)">
								<area target="" alt="Button 5" title="Button 5" href="#" coords="114,184,157,224"
									shape="rect" onclick="select_new_button(5)">
								<area target="" alt="Button 6" title="Button 6" href="#" coords="378,76,417,110"
									shape="rect" onclick="select_new_button(6)">
								<area target="" alt="Button 7" title="Button 7" href="#" coords="430,73,473,111"
									shape="rect" onclick="select_new_button(7)">
								<area target="" alt="Button 8" title="Button 8" href="#" coords="377,126,420,167"
									shape="rect" onclick="select_new_button(8)">
								<area target="" alt="Button 9" title="Button 9" href="#" coords="431,129,474,171"
									shape="rect" onclick="select_new_button(9)">
								<area target="" alt="Button 10" title="Button 10" href="#" coords="376,179,421,224"
									shape="rect" onclick="select_new_button(10)">
							</map>
						</td>
						<!-- <td style="width: 50%;"> -->
						<td>
							<br>Selected CAD Program:&nbsp;
							<select name="selected_program" id='selected_program'
								onchange="update_selected_program_items(this)">
								<option value="0">Solidworks</option>
								<option value="1">Fusion360</option>
								<option value="2">Blender</option>
								<option value="3">FreeCAD</option>
								<option value="4">AC3D</option>
							</select>
							<br><br>
							<table style="height: 250px; width: 100%;">
								<tr>
									<td style="width: 25%;">
										<br />Joystick Pan
										<br />Action 1:
										<select class="actions" id='panmodeaction0' name='panmodeaction0'></select>
										<select class="actions" id='panmodevalue0' name='panmodevalue0'></select>
										<br />Action 2:
										<select class="actions" id='panmodeaction1' name='panmodeaction1'></select>
										<select class="actions" id='panmodevalue1' name='panmodevalue1'></select>
										<br />Action 3:
										<select class="actions" id='panmodeaction2' name='panmodeaction2'></select>
										<select class="actions" id='panmodevalue2' name='panmodevalue2'></select>
									</td>
									<td style="width: 25%;">
										<br />Joystick Tilt
										<br />Action 1:
										<select class="actions" id='tiltmodeaction0' name='tiltmodeaction0'></select>
										<select class="actions" id='tiltmodevalue0' name='tiltmodevalue0'></select>
										<br />Action 2:
										<select class="actions" id='tiltmodeaction1' name='tiltmodeaction1'></select>
										<select class="actions" id='tiltmodevalue1' name='tiltmodevalue1'></select>
										<br />Action 3:
										<select class="actions" id='tiltmodeaction2' name='tiltmodeaction2'></select>
										<select class="actions" id='tiltmodevalue2' name='tiltmodevalue2'></select>
									</td>
									<td style="width: 25%;">
										<br />Joystick Zoom
										<br />Action 1:
										<select class="actions" id='zoommodeaction0' name='zoommodeaction0'></select>
										<select class="actions" id='zoommodevalue0' name='zoommodevalue0'></select>
										<br />Action 2:
										<select class="actions" id='zoommodeaction1' name='zoommodeaction1'></select>
										<select class="actions" id='zoommodevalue1' name='zoommodevalue1'></select>
										<br />Action 3:
										<select class="actions" id='zoommodeaction2' name='zoommodeaction2'></select>
										<select class="actions" id='zoommodevalue2' name='zoommodevalue2'></select>
									</td>
									<td style="width: 25%;">
										<br />Joystick Rotate
										<br />Action 1:
										<select class="actions" id='rotatemodeaction0'
											name='rotatemodeaction0'></select>
										<select class="actions" id='rotatemodevalue0' name='rotatemodevalue0'></select>
										<br />Action 2:
										<select class="actions" id='rotatemodeaction1'
											name='rotatemodeaction1'></select>
										<select class="actions" id='rotatemodevalue1' name='rotatemodevalue1'></select>
										<br />Action 3:
										<select class="actions" id='rotatemodeaction2'
											name='rotatemodeaction2'></select>
										<select class="actions" id='rotatemodevalue2' name='rotatemodevalue2'></select>
									</td>

								</tr>
								<tr>
									<br>
									<br />Selected Button:
									<input type="text" id="selected_hw_button" name="selected_hw_button"
										style="border:0px" readonly>
									<br />Action 1:
									<select class="actions" id='joybuttonaction0' name='joybuttonaction0'></select>
									<select class="actions" id='joybuttonvalue0' name='joybuttonvalue0'></select>
									<br />Action 2:
									<select class="actions" id='joybuttonaction1' name='joybuttonaction1'></select>
									<select class="actions" id='joybuttonvalue1' name='joybuttonvalue1'></select>
									<br />Action 3:
									<select class="actions" id='joybuttonaction2' name='joybuttonaction2'></select>
									<select class="actions" id='joybuttonvalue2' name='joybuttonvalue2'></select>
								</tr>
							</table>
						</td>
					</tr>
				</tbody>
			</table>
			<div class="form" style="width: 50%; text-align: : center; margin: auto;">
				<input type="hidden" id='save' name='save' value="cadparams">
				<br /><button style='cursor: pointer;' form="cadparamsconfig" type='save'>Save CAD Config</button>
			</div>
		</form>
	</div>
	</p>
	</div>
	<!-- Upload Logo -->
	<div id="uploadimage" class="tabcontent">
		<h3>Upload a new logo</h3>
		<div style="width: 70%; text-align: left; margin: auto;"> You can customize the logos that are used. If you
			upload a file with a name that already exists, the file is <u>overwritten</u>. You can only upload .bmp
			images. There images should be in a 24-bit RGB format and should be no more then 75x75 pixels. Smaller
			images are supported.<br /><br />

			Images that are used for Elgato's Stream Deck are also supported. These should also be in a 24-bit RGB
			format. You can convert these using free online tools like <a
				href="https://online-converting.com/image/convert2bmp/"
				target="_blank">https://online-converting.com/image/convert2bmp/</a>.<br /><br />

			CADDeck will check the colour of the first pixel in the image. If that pixel is black (#000000),
			all
			black pixels will be rendered as transparent and the button colour chosen in the "General" tab will be
			used.
			If that pixel has a colour, the button will have that colour so that the image blends in nicely.
		</div>
		<p>
		<div class="form" style="width: 10%; text-align: : center; margin: auto;">
			<input form="uploadfile" type="file" name="name" accept=".bmp"><br /><br />
			<button style='cursor: pointer;' form="uploadfile" type="save">Upload</button>
		</div>
		</p>
	</div>

	<!-- File Editor -->
	<div id="editor" class="tabcontent">
		<h3>Remove files</h3>

		<div class="form" id=deletefilelist style="width: 20%; text-align: left; margin: auto;">

		</div>

	</div>

	<!-- Upload JSON -->
	<div id="uploadjson" class="tabcontent">
		<h3>Upload a JSON Config File</h3>
		<div style="width: 70%; text-align: left; margin: auto;"> You can upload a previously downloaded JSON file
			to save you some time from having to configure a whole menu. The filename should be the menu name (all
			lower-case), e.g. menu.json for Menu, menu2.json for Menu 2, etc. It is also a good idea to validate
			your .json file if you made any manual modifications. You can do that using
			<a href="https://jsonlint.com/" target="_blank">JSONLint</a>
			<br /><br />
		</div>
		<p>
		<div class="form" style="width: 10%; text-align: center; margin: auto;">
			<input form="uploadjsonfile" type="file" name="name" accept=".json"><br /><br />
			<button style='cursor: pointer;' form="uploadjsonfile" type="save">Upload JSON</button>
		</div>
		</p>
	</div>

	<!-- Download JSON -->
	<div id="downloadjson" class="tabcontent">
		<h3>Download a Menu Config File</h3>
		<div style="width: 70%; text-align: center; margin: auto;"> Select a file from the list and download it to
			the client computer. <br /><br /></div>
		<p>
		<div class="form" style="width: 20%; text-align: center; margin: auto;">
			<label for="framework">Select Menu</label>
			<select name="menunumberlist_download" id="menunumberlist_download" form="downloadjsonfile">
				<option value="0">Home Menu</option>
				<option value="1">Menu 1</option>
				<option value="2">Menu 2</option>
				<option value="3">Menu 3</option>
				<option value="4">Menu 4</option>
				<option value="5">Menu 5</option>
				<option value="6">Menu 6</option>
				<option value="7">Menu 7</option>
				<option value="8">Menu 8</option>
				<option value="9">Menu 9</option>
			</select>
			<br /><br />
			<!-- <input form="downloadjsonfile" type=hidden name="name" ><br /><br /> -->
			<button style='cursor: pointer;' form="downloadjsonfile" type="save">Download</button>
		</div>
		</p>
	</div>



	<!-- INFO -->
	<div id="info" class="tabcontent">
		<h3>About CADDeck</h3>
		<div id="infocontent" style="width: 40%; text-align: left; margin: auto;">

		</div>
		<p>
	</div>
	</div>

	</div>

	<!-- ---------------------- javscript includes ---------------------- -->


	<script>
		function togglepassword() {
			var field = document.getElementById("password");
			if (field.type === "password") {
				field.type = "text";
			} else {
				field.type = "password";
			}
		}
	</script>
	<script>
		function openMenu(evt, menuitem) {
			// Declare all variables
			var i, tabcontent, tablinks;

			// Get all elements with class="tabcontent" and hide them
			tabcontent = document.getElementsByClassName("tabcontent");
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}

			// Get all elements with class="tablinks" and remove the class "active"
			tablinks = document.getElementsByClassName("tablinks");
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].className = tablinks[i].className.replace(" active", "");
			}

			// Show the current tab, and add an "active" class to the button that opened the tab
			console.log("openMenu():", menuitem);

			if (menuitem == 'menu') {
				getMenuConfig(0);               // load the first menu data
			}
			document.getElementById(menuitem).style.display = "block";
			evt.currentTarget.className += " active";
		}

		document.addEventListener('DOMContentLoaded', openMenu(event, 'intro'), false);
	</script>
	<script>
		var selecteditems = [{
			name: 'Do Nothing',
			value: '0',
			subitems: [{
				name: '--',
				value: '0'
			}]
		},
		{
			name: 'Delay',
			value: '1',
			subitems: [{
				name: '100ms',
				value: '100'
			},
			{
				name: '200ms',
				value: '200'
			}
				,
			{
				name: '500ms',
				value: '500'
			}
				,
			{
				name: '1000ms',
				value: '1000'
			}
			]
		},
		{
			name: 'Arrows and TAB',
			value: '2',
			subitems: [{
				name: '--',
				value: '0'
			},
			{
				name: 'UP Arrow',
				value: '1'
			},
			{
				name: 'DOWN Arrow',
				value: '2'
			},
			{
				name: 'LEFT Arrow',
				value: '3'
			},
			{
				name: 'RIGHT Arrow',
				value: '4'
			},
			{
				name: 'Backspace',
				value: '5'
			},
			{
				name: 'TAB',
				value: '6'
			},
			{
				name: 'Return',
				value: '7'
			},
			{
				name: 'Page Up',
				value: '8'
			},
			{
				name: 'Page Down',
				value: '9'
			},
			{
				name: 'Delete',
				value: '10'
			},
			{
				name: 'PrintScreen',
				value: '11'
			},
			{
				name: 'ESC',
				value: '12'
			},
			{
				name: 'HOME',
				value: '13'
			},
			{
				name: 'END',
				value: '14'
			}
			]
		},
		{
			name: 'Mediakey',
			value: '3',
			subitems: [{
				name: 'Mute',
				value: '1'
			},
			{
				name: 'Volume Down',
				value: '2'
			},
			{
				name: 'Volume Up',
				value: '3'
			},
			{
				name: 'Play/Pause',
				value: '4'
			},
			{
				name: 'Stop',
				value: '5'
			},
			{
				name: 'Next',
				value: '6'
			},
			{
				name: 'Previous',
				value: '7'
			},
			{
				name: 'WWW Home',
				value: '8'
			},
			{
				name: 'File Browser',
				value: '9'
			},
			{
				name: 'Calculator',
				value: '10'
			},
			{
				name: 'WWW Bookmarks',
				value: '11'
			},
			{
				name: 'WWW Search',
				value: '12'
			},
			{
				name: 'WWW Stop',
				value: '13'
			},
			{
				name: 'WWW Back',
				value: '14'
			},
			{
				name: 'Cons Control',
				value: '15'
			},
			{
				name: 'Email App',
				value: '16'
			}
			]
		},
		{
			name: 'Letters',
			value: '4',
			subitems: [{
				name: '-space-',
				value: ' '
			},
			{
				name: 'a',
				value: 'a'
			},
			{
				name: 'b',
				value: 'b'
			},
			{
				name: 'c',
				value: 'c'
			},
			{
				name: 'd',
				value: 'd'
			},
			{
				name: 'e',
				value: 'e'
			},
			{
				name: 'f',
				value: 'f'
			},
			{
				name: 'g',
				value: 'g'
			},
			{
				name: 'h',
				value: 'h'
			},
			{
				name: 'i',
				value: 'i'
			},
			{
				name: 'j',
				value: 'j'
			},
			{
				name: 'k',
				value: 'k'
			},
			{
				name: 'l',
				value: 'l'
			},
			{
				name: 'm',
				value: 'm'
			},
			{
				name: 'n',
				value: 'n'
			},
			{
				name: 'o',
				value: 'o'
			},
			{
				name: 'p',
				value: 'p'
			},
			{
				name: 'q',
				value: 'q'
			},
			{
				name: 'r',
				value: 'r'
			},
			{
				name: 's',
				value: 's'
			},
			{
				name: 't',
				value: 't'
			},
			{
				name: 'u',
				value: 'u'
			},
			{
				name: 'v',
				value: 'v'
			},
			{
				name: 'w',
				value: 'w'
			},
			{
				name: 'x',
				value: 'x'
			},
			{
				name: 'y',
				value: 'y'
			},
			{
				name: 'z',
				value: 'z'
			}

			]
		},
		{
			name: 'Option Keys',
			value: '5',
			subitems: [{
				name: 'Left CTRL',
				value: '1'
			},
			{
				name: 'Left Shift',
				value: '2'
			},
			{
				name: 'Left ALT',
				value: '3'
			},
			{
				name: 'Left GUI',
				value: '4'
			},
			{
				name: 'Right CTRL',
				value: '5'
			},
			{
				name: 'Right Shift',
				value: '6'
			},
			{
				name: 'Right ALT',
				value: '7'
			},
			{
				name: 'Right GUI',
				value: '8'
			},
			{
				name: 'Release All',
				value: '9'
			}]
		},
		{
			name: 'Function Keys',
			value: '6',
			subitems: [{
				name: 'F1',
				value: '1'
			},
			{
				name: 'F2',
				value: '2'
			},
			{
				name: 'F3',
				value: '3'
			},
			{
				name: 'F4',
				value: '4'
			},
			{
				name: 'F5',
				value: '5'
			},
			{
				name: 'F6',
				value: '6'
			},
			{
				name: 'F7',
				value: '7'
			},
			{
				name: 'F8',
				value: '8'
			},
			{
				name: 'F9',
				value: '9'
			},
			{
				name: 'F10',
				value: '10'
			},
			{
				name: 'F11',
				value: '11'
			},
			{
				name: 'F12',
				value: '12'
			},
			{
				name: 'F13',
				value: '13'
			},
			{
				name: 'F14',
				value: '14'
			},
			{
				name: 'F15',
				value: '15'
			},
			{
				name: 'F16',
				value: '16'
			},
			{
				name: 'F17',
				value: '17'
			},
			{
				name: 'F18',
				value: '18'
			},
			{
				name: 'F19',
				value: '19'
			},
			{
				name: 'F20',
				value: '20'
			},
			{
				name: 'F21',
				value: '21'
			},
			{
				name: 'F22',
				value: '22'
			},
			{
				name: 'F23',
				value: '23'
			},
			{
				name: 'F24',
				value: '24'
			}
			]
		},
		{
			name: 'Numbers',
			value: '7',
			subitems: [{
				name: '0',
				value: '0'
			},
			{
				name: '1',
				value: '1'
			},
			{
				name: '2',
				value: '2'
			},
			{
				name: '3',
				value: '3'
			},
			{
				name: '4',
				value: '4'
			},
			{
				name: '5',
				value: '5'
			},
			{
				name: '6',
				value: '6'
			},
			{
				name: '7',
				value: '7'
			},
			{
				name: '8',
				value: '8'
			},
			{
				name: '9',
				value: '9'
			}

			]
		},
		{
			name: 'Special Chars',
			value: '8',
			subitems: [{
				name: '.',
				value: '.'
			},
			{
				name: ',',
				value: ','
			},
			{
				name: '!',
				value: '!'
			},
			{
				name: '?',
				value: '?'
			},
			{
				name: '/',
				value: '/'
			},
			{
				name: '+',
				value: '+'
			},
			{
				name: '-',
				value: '-'
			},
			{
				name: '&',
				value: '&'
			},
			{
				name: '^',
				value: '^'
			},
			{
				name: '%',
				value: '%'
			},
			{
				name: '*',
				value: '*'
			},
			{
				name: '#',
				value: '#'
			},
			{
				name: '$',
				value: '$'
			},
			{
				name: '[',
				value: '['
			},
			{
				name: ']',
				value: ']'
			}

			]
		},
		{
			name: 'Combos',
			value: '9',
			subitems: [{
				name: 'LEFT CTRL+SHIFT',
				value: '1'
			},
			{
				name: 'LEFT ALT+SHIFT',
				value: '2'
			},
			{
				name: 'LEFT GUI+SHIFT',
				value: '3'
			},
			{
				name: 'LEFT CTRL+GUI',
				value: '4'
			},
			{
				name: 'LEFT ALT+GUI',
				value: '5'
			},
			{
				name: 'LEFT CTRL+ALT',
				value: '6'
			},
			{
				name: 'LEFT CTRL+ALT+GUI',
				value: '7'
			},
			{
				name: 'RIGHT CTRL+SHIFT',
				value: '8'
			},
			{
				name: 'RIGHT ALT+SHIFT',
				value: '9'
			},
			{
				name: 'RIGHT GUI+SHIFT',
				value: '10'
			},
			{
				name: 'RIGHT CTRL+GUI',
				value: '11'
			},
			{
				name: 'RIGHT ALT+GUI',
				value: '12'
			},
			{
				name: 'RIGHT CTRL+ALT',
				value: '13'
			},
			{
				name: 'RIGHT CTRL+ALT+GUI',
				value: '14'
			}

			]
		},
		{
			name: 'Helpers',
			value: '10',
			subitems: [{
				name: 'Helper 1',
				value: '1'
			},
			{
				name: 'Helper 2',
				value: '2'
			},
			{
				name: 'Helper 3',
				value: '3'
			},
			{
				name: 'Helper 4',
				value: '4'
			},
			{
				name: 'Helper 5',
				value: '5'
			},
			{
				name: 'Helper 6',
				value: '6'
			},
			{
				name: 'Helper 7',
				value: '7'
			},
			{
				name: 'Helper 8',
				value: '8'
			},
			{
				name: 'Helper 9',
				value: '9'
			},
			{
				name: 'Helper 10',
				value: '10'
			},
			{
				name: 'Helper 11',
				value: '11'
			}

			]
		},
		{
			name: 'FTD Functions',
			value: '11',
			subitems: [{
				name: 'Config Mode',
				value: '1'
			},
			{
				name: 'Brightness Up',
				value: '2'
			},
			{
				name: 'Brightness Down',
				value: '3'
			},
			{
				name: 'Enable/Disable Sleep',
				value: '4'
			},
			{
				name: 'Info Page',
				value: '5'
			},
			{
				name: 'Goto Menu 0 (Home)',
				value: '6'
			},
			{
				name: 'Save General Config',
				value: '7'
			},
			{
				name: 'Enable USB Comms',
				value: '8'
			}
			]
		},
		{
			name: 'Numpad',
			value: '12',
			subitems: [{
				name: 'Numpad 0',
				value: '0'
			},
			{
				name: 'Numpad 1',
				value: '1'
			},
			{
				name: 'Numpad 2',
				value: '2'
			},
			{
				name: 'Numpad 3',
				value: '3'
			},
			{
				name: 'Numpad 4',
				value: '4'
			},
			{
				name: 'Numpad 5',
				value: '5'
			},
			{
				name: 'Numpad 6',
				value: '6'
			},
			{
				name: 'Numpad 7',
				value: '7'
			},
			{
				name: 'Numpad 8',
				value: '8'
			},
			{
				name: 'Numpad 9',
				value: '9'
			},
			{
				name: 'Numpad /',
				value: '10'
			},
			{
				name: 'Numpad *',
				value: '11'
			},
			{
				name: 'Numpad -',
				value: '12'
			},
			{
				name: 'Numpad +',
				value: '13'
			},
			{
				name: 'Numpad RETURN',
				value: '14'
			},
			{
				name: 'Numpad .',
				value: '15'
			}

			]
		},
		{
			name: 'User Actions',
			value: '13',
			subitems: [{
				name: 'Action 1',
				value: '1'
			},
			{
				name: 'Action 2',
				value: '2'
			},
			{
				name: 'Action 3',
				value: '3'
			},
			{
				name: 'Action 4',
				value: '4'
			},
			{
				name: 'Action 5',
				value: '5'
			},
			{
				name: 'Action 6',
				value: '6'
			},
			{
				name: 'Action 7',
				value: '7'
			}

			]
		},
		{
			name: 'Goto Page',
			value: '14',
			subitems: [{
				name: 'Page 0',
				value: '0'
			}, {
				name: 'Page 1',
				value: '1'
			}, {
				name: 'Page 2',
				value: '2'
			}, {
				name: 'Page 3',
				value: '3'
			}, {
				name: 'Page 4',
				value: '4'
			}, {
				name: 'Page 5',
				value: '5'
			}, {
				name: 'Page 6',
				value: '6'
			}, {
				name: 'Page 7',
				value: '7'
			}, {
				name: 'Page 8',
				value: '8'
			}, {
				name: 'Page 9',
				value: '9'
			}

			]
		},
		{
			name: 'CAD Functions',
			value: '15',
			subitems: [{
				name: 'Set Program',
				value: '1'
			},
			{
				name: 'Joystick Zero',
				value: '2'
			},
			{
				name: 'Joystick Scale',
				value: '3'
			},
			{
				name: 'Zoom Scale',
				value: '4'
			},
			{
				name: 'Rotate Scale',
				value: '5'
			},
			{
				name: 'Joystick Invert X',
				value: '6'
			},
			{
				name: 'Joystick Invert Y',
				value: '7'
			},
			{
				name: 'Zoom Invert',
				value: '8'
			},
			{
				name: 'Rotate Invert',
				value: '9'
			},
			{
				name: 'Save Settings',
				value: '10'
			},
			{
				name: 'Joystick Pan',
				value: '11'
			},
			{
				name: 'Joystick Tilt',
				value: '12'
			},
			{
				name: 'Joystick Zoom',
				value: '13'
			},
			{
				name: 'Joystick Rotate',
				value: '14'
			},
			{
				name: 'Mode Button',
				value: '15'
			}
			]
		},
		{
			name: 'Set CAD Program',
			value: '16',
			subitems: [{
				name: 'Solidworks',
				value: '0'
			}, {
				name: 'Fusion 360',
				value: '1'
			}, {
				name: 'Blender',
				value: '2'
			}, {
				name: 'FreeCAD',
				value: '3'
			}, {
				name: 'AC3D',
				value: '4'
			}
			]
		},
		{
			name: 'Mouse Buttons',
			value: '17',
			subitems: [{
				name: 'Press Left Button',
				value: '1'
			}, {
				name: 'Press Right Button',
				value: '2'
			}, {
				name: 'Press Middle Button',
				value: '3'
			}, {
				name: 'Press Left and Middle Buttons',
				value: '4'
			}, {
				name: 'Press Right and Middle Buttons',
				value: '5'
			}, {
				name: 'Release Left Button',
				value: '6'
			}, {
				name: 'Release Right Button',
				value: '7'
			}, {
				name: 'Release Middle Button',
				value: '8'
			}, {
				name: 'Release Left and Middle Buttons',
				value: '9'
			}, {
				name: 'Release Right and Middle Buttons',
				value: '10'
			}, {
				name: 'Release All Buttons',
				value: '11'
			}
			]
		},
		{
			name: 'Previous Page',
			value: '18',
			subitems: [{
				name: 'No Action',
				value: '0'
			}
			]
		},
		{
			name: 'Default Joystick Mode',
			value: '19',
			subitems: [{
				name: 'None',
				value: '0'
			},
			{
				name: 'Pan',
				value: '1'
			},
			{
				name: 'Rotate',
				value: '2'
			},
			{
				name: 'Zoom',
				value: '3'
			},
			{
				name: 'Mouse',
				value: '4'
			}
			]
		}
		];
	</script>
	<script>
		$(function () {
			$('#savemenu')
				.change(function () {
					// var value = $(this).val();
					// var menu = $('#button11value0');

					// menu.empty();
					// $.each(temp[value], function () {
					// 	$('<option />')
					// 		.attr('value', this.value)
					// 		.html(this.name)
					// 		.appendTo(menu);
					// });
					console.log("Change detected in form savemenu.")
				});
		});

	</script>
	<script>

		// TODO: Find some way to get rid of the per-button duplicated code below

		var items = selecteditems.slice(0); // Create a duplicate of the selecteditems array for now

		$(function () {
			var temp = {};
			////////////////////////// Row 1 ///////////////////////////
			// menu button11
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button11action0');
				temp[this.value] = this.subitems;
			});

			$('#button11action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button11value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button11action1');
				temp[this.value] = this.subitems;
			});

			$('#button11action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button11value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button11action2');
				temp[this.value] = this.subitems;
			});

			$('#button11action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button11value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menuButton 12
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button12action0');
				temp[this.value] = this.subitems;
			});

			$('#button12action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button12value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button12action1');
				temp[this.value] = this.subitems;
			});

			$('#button12action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button12value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button12action2');
				temp[this.value] = this.subitems;
			});

			$('#button12action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button12value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menu Button13
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button13action0');
				temp[this.value] = this.subitems;
			});

			$('#button13action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button13value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button13action1');
				temp[this.value] = this.subitems;
			});

			$('#button13action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button13value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button13action2');
				temp[this.value] = this.subitems;
			});

			$('#button13action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button13value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menu button14
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button14action0');
				temp[this.value] = this.subitems;
			});

			$('#button14action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button14value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button14action1');
				temp[this.value] = this.subitems;
			});

			$('#button14action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button14value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button14action2');
				temp[this.value] = this.subitems;
			});

			$('#button14action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button14value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menu button15
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button15action0');
				temp[this.value] = this.subitems;
			});

			$('#button15action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button15value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button15action1');
				temp[this.value] = this.subitems;
			});

			$('#button15action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button15value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button15action2');
				temp[this.value] = this.subitems;
			});

			$('#button15action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button15value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();
			////////////////////////// Row 2 ///////////////////////////
			// menu button21
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button21action0');
				temp[this.value] = this.subitems;
			});

			$('#button21action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button21value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button21action1');
				temp[this.value] = this.subitems;
			});

			$('#button21action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button21value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button21action2');
				temp[this.value] = this.subitems;
			});

			$('#button21action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button21value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menuButton 22
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button22action0');
				temp[this.value] = this.subitems;
			});

			$('#button22action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button22value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button22action1');
				temp[this.value] = this.subitems;
			});

			$('#button22action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button22value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button22action2');
				temp[this.value] = this.subitems;
			});

			$('#button22action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button22value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menu Button23
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button23action0');
				temp[this.value] = this.subitems;
			});

			$('#button23action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button23value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button23action1');
				temp[this.value] = this.subitems;
			});

			$('#button23action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button23value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button23action2');
				temp[this.value] = this.subitems;
			});

			$('#button23action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button23value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menu button24
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button24action0');
				temp[this.value] = this.subitems;
			});

			$('#button24action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button24value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button24action1');
				temp[this.value] = this.subitems;
			});

			$('#button24action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button24value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button24action2');
				temp[this.value] = this.subitems;
			});

			$('#button24action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button24value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menu button25
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button25action0');
				temp[this.value] = this.subitems;
			});

			$('#button25action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button25value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button25action1');
				temp[this.value] = this.subitems;
			});

			$('#button25action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button25value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button25action2');
				temp[this.value] = this.subitems;
			});

			$('#button25action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button25value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			////////////////////////// Row 3 ///////////////////////////
			// menu button31
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button31action0');
				temp[this.value] = this.subitems;
			});

			$('#button31action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button31value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button31action1');
				temp[this.value] = this.subitems;
			});

			$('#button31action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button31value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button31action2');
				temp[this.value] = this.subitems;
			});

			$('#button31action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button31value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menuButton 12
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button32action0');
				temp[this.value] = this.subitems;
			});

			$('#button32action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button32value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button32action1');
				temp[this.value] = this.subitems;
			});

			$('#button32action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button32value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button32action2');
				temp[this.value] = this.subitems;
			});

			$('#button32action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button32value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menu Button33
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button33action0');
				temp[this.value] = this.subitems;
			});

			$('#button33action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button33value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button33action1');
				temp[this.value] = this.subitems;
			});

			$('#button33action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button33value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button33action2');
				temp[this.value] = this.subitems;
			});

			$('#button33action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button33value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menu button34
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button34action0');
				temp[this.value] = this.subitems;
			});

			$('#button34action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button34value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button34action1');
				temp[this.value] = this.subitems;
			});

			$('#button34action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button34value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button34action2');
				temp[this.value] = this.subitems;
			});

			$('#button34action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button34value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// menu button35
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button35action0');
				temp[this.value] = this.subitems;
			});

			$('#button35action0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button35value0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button35action1');
				temp[this.value] = this.subitems;
			});

			$('#button35action1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button35value1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#button35action2');
				temp[this.value] = this.subitems;
			});

			$('#button35action2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#button35value2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
				})
				.change();

			// joystick button actions
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#joybuttonaction0');
				temp[this.value] = this.subitems;
			});

			$('#joybuttonaction0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#joybuttonvalue0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_hwbutton_def(this, 1, 0);
				})
				.change();

			$('#joybuttonvalue0')
				.change(function () {
					update_hwbutton_def(this, 2, 0);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#joybuttonaction1');
				temp[this.value] = this.subitems;
			});

			$('#joybuttonaction1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#joybuttonvalue1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_hwbutton_def(this, 1, 1);
				})
				.change();

			$('#joybuttonvalue1')
				.change(function () {
					update_hwbutton_def(this, 2, 1);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#joybuttonaction2');
				temp[this.value] = this.subitems;
			});

			$('#joybuttonaction2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#joybuttonvalue2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_hwbutton_def(this, 1, 2);
				})
				.change();

			$('#joybuttonvalue2')
				.change(function () {
					update_hwbutton_def(this, 2, 2);
				})
				.change();

			// joystick pan mode actions
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#panmodeaction0');
				temp[this.value] = this.subitems;
			});

			$('#panmodeaction0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#panmodevalue0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});

					update_axisbutton_def(this, PanAxis, 1, 0);
				})
				.change();

			$('#panmodevalue0')
				.change(function () {
					update_axisbutton_def(this, PanAxis, 2, 0);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#panmodeaction1');
				temp[this.value] = this.subitems;
			});

			$('#panmodeaction1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#panmodevalue1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, PanAxis, 1, 1);
				})
				.change();

			$('#panmodevalue1')
				.change(function () {
					update_axisbutton_def(this, PanAxis, 2, 1);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#panmodeaction2');
				temp[this.value] = this.subitems;
			});

			$('#panmodeaction2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#panmodevalue2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, PanAxis, 1, 2);
				})
				.change();

			$('#panmodevalue2')
				.change(function () {
					update_axisbutton_def(this, PanAxis, 2, 2);
				})
				.change();


			// joystick tilt mode actions
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#tiltmodeaction0');
				temp[this.value] = this.subitems;
			});

			$('#tiltmodeaction0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#tiltmodevalue0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, TiltAxis, 1, 0);
				})
				.change();

			$('#tiltmodevalue0')
				.change(function () {
					update_axisbutton_def(this, TiltAxis, 2, 0);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#tiltmodeaction1');
				temp[this.value] = this.subitems;
			});

			$('#tiltmodeaction1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#tiltmodevalue1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, TiltAxis, 1, 1);
				})
				.change();

			$('#tiltmodevalue1')
				.change(function () {
					update_axisbutton_def(this, TiltAxis, 2, 1);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#tiltmodeaction2');
				temp[this.value] = this.subitems;
			});

			$('#tiltmodeaction2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#tiltmodevalue2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, TiltAxis, 1, 2);
				})
				.change();

			$('#tiltmodevalue2')
				.change(function () {
					update_axisbutton_def(this, TiltAxis, 2, 2);
				})
				.change();

			// joystick zoom mode actions
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#zoommodeaction0');
				temp[this.value] = this.subitems;
			});

			$('#zoommodeaction0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#zoommodevalue0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, ZoomAxis, 1, 0);
				})
				.change();

			$('#zoommodevalue0')
				.change(function () {
					update_axisbutton_def(this, ZoomAxis, 2, 0);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#zoommodeaction1');
				temp[this.value] = this.subitems;
			});

			$('#zoommodeaction1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#zoommodevalue1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, ZoomAxis, 1, 1);
				})
				.change();

			$('#zoommodevalue1')
				.change(function () {
					update_axisbutton_def(this, ZoomAxis, 2, 1);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#zoommodeaction2');
				temp[this.value] = this.subitems;
			});

			$('#zoommodeaction2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#zoommodevalue2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, ZoomAxis, 1, 2);
				})
				.change();

			$('#zoommodevalue2')
				.change(function () {
					update_axisbutton_def(this, ZoomAxis, 2, 2);
				})
				.change();

			// joystick button actions
			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#rotatemodeaction0');
				temp[this.value] = this.subitems;
			});

			$('#rotatemodeaction0')
				.change(function () {
					var value = $(this).val();
					var menu = $('#rotatemodevalue0');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, RotateAxis, 1, 0);
				})
				.change();

			$('#rotatemodevalue0')
				.change(function () {
					update_axisbutton_def(this, RotateAxis, 2, 0);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#rotatemodeaction1');
				temp[this.value] = this.subitems;
			});

			$('#rotatemodeaction1')
				.change(function () {
					var value = $(this).val();
					var menu = $('#rotatemodevalue1');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, RotateAxis, 1, 1);
				})
				.change();

			$('#rotatemodevalue1')
				.change(function () {
					update_axisbutton_def(this, RotateAxis, 2, 1);
				})
				.change();

			$.each(items, function () {
				$('<option />')
					.attr('value', this.value)
					.html(this.name)
					.appendTo('#rotatemodeaction2');
				temp[this.value] = this.subitems;
			});

			$('#rotatemodeaction2')
				.change(function () {
					var value = $(this).val();
					var menu = $('#rotatemodevalue2');

					menu.empty();
					$.each(temp[value], function () {
						$('<option />')
							.attr('value', this.value)
							.html(this.name)
							.appendTo(menu);
					});
					update_axisbutton_def(this, RotateAxis, 1, 2);
				})
				.change();

			$('#rotatemodevalue2')
				.change(function () {
					update_axisbutton_def(this, RotateAxis, 2, 2);
				})
				.change();

		});


	</script>
	<script>
		function createCheck(filename) {
			return `<input form="delete" type="checkbox" id="${filename}" name="${filename}" value="${filename}"><label for="${filename}"> ${filename}</label><br>`;
		}

		function fillvaluelist(targetNode, srcArray) {

			targetNode.innerHTML = srcArray.reduce((options, { value, name }) =>
				options += `<option value="${value}">${name}</option>`,
				'');

		}



		function updateMenuItems(select) {
			var selectedOption = select.options[select.selectedIndex];
			//    alert("The selected menu is " + selectedOption.value);
			getMenuConfig(selectedOption.value);
		}

		function getMenuConfig(loadingMenuNumber) {

			menuFileName = `config/menu${loadingMenuNumber}.json`;
			console.log('getMenuConfig(): called with menu number ' + loadingMenuNumber);
			console.log('getMenuConfig(): fetching ' + menuFileName);

			// Load Menu
			fetch(menuFileName)
				.then((response) => {
					return response.json()
				})
				.then((data) => {
					console.log('getMenuConfig(): loading menu ' + menuFileName);

					if (data.menuname !== undefined) {
						document.getElementById('menuname').value = data.menuname;
					}


					for (let row = 1; row <= 3; row++) {
						for (let col = 1; col <= 5; col++) {

							buttonName = 'button' + row + col

							if (data[buttonName] !== undefined) {
								document.getElementById(buttonName + 'logo').value = data[buttonName]['logo'];

								if (data[buttonName]['latch']) {
									document.getElementById(buttonName + 'latch').checked = true;
								} else {
									document.getElementById(buttonName + 'latch').checked = false;
								}

								if (data[buttonName]['latchlogo'] == '') {
									document.getElementById(buttonName + 'latchlogo').value = '---';
								} else {
									document.getElementById(buttonName + 'latchlogo').value = data[buttonName]['latchlogo'];
								}

								document.getElementById(buttonName + 'action0').value = data[buttonName]['actionarray'][0];
								document.getElementById(buttonName + 'action1').value = data[buttonName]['actionarray'][1];
								document.getElementById(buttonName + 'action2').value = data[buttonName]['actionarray'][2];

								fillvaluelist(document.getElementById(buttonName + 'value0'), selecteditems[data[buttonName]['actionarray'][0]].subitems);
								document.getElementById(buttonName + 'value0').value = data[buttonName]['valuearray'][0];
								fillvaluelist(document.getElementById(buttonName + 'value1'), selecteditems[data[buttonName]['actionarray'][1]].subitems);
								document.getElementById(buttonName + 'value1').value = data[buttonName]['valuearray'][1];
								fillvaluelist(document.getElementById(buttonName + 'value2'), selecteditems[data[buttonName]['actionarray'][2]].subitems);
								document.getElementById(buttonName + 'value2').value = data[buttonName]['valuearray'][2];
							} else {
								console.log('Button ' + buttonName + ' not found. Set to default values');
								document.getElementById(buttonName + 'logo').value = 'question.bmp';

								document.getElementById(buttonName + 'latch').checked = false;

								document.getElementById(buttonName + 'latchlogo').value = '---';

								document.getElementById(buttonName + 'action0').value = 0;
								document.getElementById(buttonName + 'action1').value = 0;
								document.getElementById(buttonName + 'action2').value = 0;
								document.getElementById(buttonName + 'value0').value = 0;
								document.getElementById(buttonName + 'value1').value = 0;
								document.getElementById(buttonName + 'value2').value = 0;
							}
						}
					}
				})
				.catch((err) => {
					console.log(err)
				})
		}

		var loadIsComplete = false;

		function getlogoconfig() {

			var logolist = []; // Array holding the logos (empty to start)

			var selects = document.getElementsByClassName('images');


			fetch('/info')
				.then((response4) => {
					return response4.json()
				})
				.then((data4) => {
					var divcontent = '';
					data4.forEach(obj => {
						Object.entries(obj).forEach(([key, value]) => {

							divcontent += `${key}: ${value}<br>`;
						});

					});
					document.getElementById("infocontent").innerHTML = divcontent;

				})
				.catch((err) => {
					console.log(err)
				})

				.then((data) => {
					fetch('/list?dir=/logos')
						.then((response2) => {
							return response2.json()
						})
						.then((data2) => {
							data2.forEach(obj => {
								Object.entries(obj).forEach(([key, value]) => {
									logolist.push(`${value}`);
									var i = selects.length;
									while (i--) {
										var select = selects[i];
										select.add(new Option(`${value}`, `${value}`));
									}

								});
							});

							var i = selects.length;
							while (i--) {
								var select = selects[i];
								select.add(new Option('---', '---'));
							}

							var checkboxlist = '<form method="post" id="delete" action="/editor">';
							data2.forEach(obj => {
								Object.entries(obj).forEach(([key, value]) => {

									var input = createCheck(value); // Creates the html for the checkbox
									checkboxlist += input;

								});

							});
							checkboxlist += '<br><button style="cursor: pointer;"" type="save">Delete files</button></form>';
							document.getElementById("deletefilelist").innerHTML = checkboxlist;

						})
						.then(() => {
							document.getElementById("contentloading").style.display = "none";
							document.getElementById('ball-loader').style.display = "none";
							document.getElementById("maincontent").style.display = "block";
							loadIsComplete = true;
						})
						.catch((err) => {
							console.log(err)
						})

				})
				.catch((err) => {
					console.log(err)
				})


		}

		// Function to get Sleep settings:
		function getwificonfig() {

			// Load Menu 5
			fetch('config/wificonfig.json')
				.then((response) => {
					return response.json()
				})
				.then((data) => {


					document.getElementById("ssid").value = data.ssid;
					document.getElementById("password").value = data.password;
					document.getElementById("wifimode").value = data.wifimode;
					document.getElementById("wifihostname").value = data.wifihostname;
					document.getElementById("attempts").value = data.attempts;
					document.getElementById("attemptdelay").value = data.attemptdelay;

				})
				.catch((err) => {
					console.log(err)
				})
		}

		// Five applications, each with eleven buttons, each with action and value arrays
		var hwbuttondefs =
			[[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]],
			[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]],
			[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]],
			[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]],
			[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]]];

		// Five applications, each with four axis, each with action and value arrays
		const PanAxis = 0;
		const TiltAxis = 1;
		const ZoomAxis = 2;
		const RotateAxis = 3;
		axisbuttondefs =
			[[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]],
			[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]],
			[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]],
			[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]],
			[[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]],
			[["0", "0", "0"], ["0", "0", "0"]]]];

		var current_program_index = 0;
		var current_button_index = 0;

		function getCADParamsConfig() {


			fetch('config/cadparams.json')
				.then((response) => {
					return response.json()
				})
				.then((data) => {

					document.getElementById("joy_scale_x").value = data.joy_scale_x;
					document.getElementById("joy_scale_y").value = data.joy_scale_y;
					document.getElementById("joy_deadzone").value = data.joy_deadzone;
					document.getElementById("joy_sensitivity").value = data.joy_sensitivity;
					document.getElementById("zoom_scale").value = data.zoom_scale;
					document.getElementById("zoom_deadzone").value = data.zoom_deadzone;
					document.getElementById("zoom_sensitivity").value = data.zoom_sensitivity;
					document.getElementById("rotate_scale").value = data.rotate_scale;
					document.getElementById("rotate_deadzone").value = data.rotate_deadzone;
					document.getElementById("rotate_sensitivity").value = data.rotate_sensitivity;
					document.getElementById("joy_steady_time").value = data.joy_steady_time;
					document.getElementById("current_program").value = data.current_program;
					document.getElementById("selected_program").value = data.current_program;

					for (let program = 0; program < 5; program++) {
						console.log('Loading program ' + program);
						console.log('   Loading defn pan ');
						axisbuttondefs[program][PanAxis][0][0] = data.programs[program].pan.actionarray[0];
						axisbuttondefs[program][PanAxis][0][1] = data.programs[program].pan.actionarray[1];
						axisbuttondefs[program][PanAxis][0][2] = data.programs[program].pan.actionarray[2];
						axisbuttondefs[program][PanAxis][1][0] = data.programs[program].pan.valuearray[0];
						axisbuttondefs[program][PanAxis][1][1] = data.programs[program].pan.valuearray[1];
						axisbuttondefs[program][PanAxis][1][2] = data.programs[program].pan.valuearray[2];

						console.log('   Loading defn tilt ');
						axisbuttondefs[program][TiltAxis][0][0] = data.programs[program].tilt.actionarray[0];
						axisbuttondefs[program][TiltAxis][0][1] = data.programs[program].tilt.actionarray[1];
						axisbuttondefs[program][TiltAxis][0][2] = data.programs[program].tilt.actionarray[2];
						axisbuttondefs[program][TiltAxis][1][0] = data.programs[program].tilt.valuearray[0];
						axisbuttondefs[program][TiltAxis][1][1] = data.programs[program].tilt.valuearray[1];
						axisbuttondefs[program][TiltAxis][1][2] = data.programs[program].tilt.valuearray[2];

						console.log('   Loading defn rotate ');
						axisbuttondefs[program][RotateAxis][0][0] = data.programs[program].rotate.actionarray[0];
						axisbuttondefs[program][RotateAxis][0][1] = data.programs[program].rotate.actionarray[1];
						axisbuttondefs[program][RotateAxis][0][2] = data.programs[program].rotate.actionarray[2];
						axisbuttondefs[program][RotateAxis][1][0] = data.programs[program].rotate.valuearray[0];
						axisbuttondefs[program][RotateAxis][1][1] = data.programs[program].rotate.valuearray[1];
						axisbuttondefs[program][RotateAxis][1][2] = data.programs[program].rotate.valuearray[2];

						console.log('   Loading defn zoom ');
						axisbuttondefs[program][ZoomAxis][0][0] = data.programs[program].zoom.actionarray[0];
						axisbuttondefs[program][ZoomAxis][0][1] = data.programs[program].zoom.actionarray[1];
						axisbuttondefs[program][ZoomAxis][0][2] = data.programs[program].zoom.actionarray[2];
						axisbuttondefs[program][ZoomAxis][1][0] = data.programs[program].zoom.valuearray[0];
						axisbuttondefs[program][ZoomAxis][1][1] = data.programs[program].zoom.valuearray[1];
						axisbuttondefs[program][ZoomAxis][1][2] = data.programs[program].zoom.valuearray[2];

						for (let button = 0; button <= 10; button++) {
							console.log('   Loading defn button ' + button);
							hwbuttondefs[program][button][0][0] = data.programs[program].buttons[button].actionarray[0];
							hwbuttondefs[program][button][0][1] = data.programs[program].buttons[button].actionarray[1];
							hwbuttondefs[program][button][0][2] = data.programs[program].buttons[button].actionarray[2];
							hwbuttondefs[program][button][1][0] = data.programs[program].buttons[button].valuearray[0];
							hwbuttondefs[program][button][1][1] = data.programs[program].buttons[button].valuearray[1];
							hwbuttondefs[program][button][1][2] = data.programs[program].buttons[button].valuearray[2];
						}
					}

					current_program_index = 0;
					current_button_index = 0;
					show_hwbutton_def(current_program_index, current_button_index);
					show_joystickmode_def(current_program_index);
				})
				.catch((err) => {
					console.log(err)
				})
		}

		function show_hwbutton_def(program_index, button_index) {
			document.getElementById("selected_hw_button").value = "Button " + (button_index);

			document.getElementById("joybuttonaction0").value = hwbuttondefs[program_index][button_index][0][0];
			document.getElementById("joybuttonaction1").value = hwbuttondefs[program_index][button_index][0][1];
			document.getElementById("joybuttonaction2").value = hwbuttondefs[program_index][button_index][0][2];

			fillvaluelist(document.getElementById("joybuttonvalue0"), selecteditems[hwbuttondefs[program_index][button_index][0][0]].subitems);
			document.getElementById("joybuttonvalue0").value = hwbuttondefs[program_index][button_index][1][0];
			fillvaluelist(document.getElementById("joybuttonvalue1"), selecteditems[hwbuttondefs[program_index][button_index][0][1]].subitems);
			document.getElementById("joybuttonvalue1").value = hwbuttondefs[program_index][button_index][1][1];
			fillvaluelist(document.getElementById("joybuttonvalue2"), selecteditems[hwbuttondefs[program_index][button_index][0][2]].subitems);
			document.getElementById("joybuttonvalue2").value = hwbuttondefs[program_index][button_index][1][2];
		}

		function show_joystickmode_def(program_index) {
			document.getElementById('panmodeaction0').value = axisbuttondefs[program_index][PanAxis][0][0];
			document.getElementById('panmodeaction1').value = axisbuttondefs[program_index][PanAxis][0][1];
			document.getElementById('panmodeaction2').value = axisbuttondefs[program_index][PanAxis][0][2];

			fillvaluelist(document.getElementById('panmodevalue0'), selecteditems[axisbuttondefs[program_index][PanAxis][0][0]].subitems);
			document.getElementById('panmodevalue0').value = axisbuttondefs[program_index][PanAxis][1][0];
			fillvaluelist(document.getElementById('panmodevalue1'), selecteditems[axisbuttondefs[program_index][PanAxis][0][1]].subitems);
			document.getElementById('panmodevalue1').value = axisbuttondefs[program_index][PanAxis][1][1];
			fillvaluelist(document.getElementById('panmodevalue2'), selecteditems[axisbuttondefs[program_index][PanAxis][0][2]].subitems);
			document.getElementById('panmodevalue2').value = axisbuttondefs[program_index][PanAxis][1][2];

			document.getElementById('tiltmodeaction0').value = axisbuttondefs[program_index][TiltAxis][0][0];
			document.getElementById('tiltmodeaction1').value = axisbuttondefs[program_index][TiltAxis][0][1];
			document.getElementById('tiltmodeaction2').value = axisbuttondefs[program_index][TiltAxis][0][2];

			fillvaluelist(document.getElementById('tiltmodevalue0'), selecteditems[axisbuttondefs[program_index][TiltAxis][0][0]].subitems);
			document.getElementById('tiltmodevalue0').value = axisbuttondefs[program_index][TiltAxis][1][0];
			fillvaluelist(document.getElementById('tiltmodevalue1'), selecteditems[axisbuttondefs[program_index][TiltAxis][0][1]].subitems);
			document.getElementById('tiltmodevalue1').value = axisbuttondefs[program_index][TiltAxis][1][1];
			fillvaluelist(document.getElementById('tiltmodevalue2'), selecteditems[axisbuttondefs[program_index][TiltAxis][0][2]].subitems);
			document.getElementById('tiltmodevalue2').value = axisbuttondefs[program_index][TiltAxis][1][2];

			document.getElementById('zoommodeaction0').value = axisbuttondefs[program_index][ZoomAxis][0][0];
			document.getElementById('zoommodeaction1').value = axisbuttondefs[program_index][ZoomAxis][0][1];
			document.getElementById('zoommodeaction2').value = axisbuttondefs[program_index][ZoomAxis][0][2];

			fillvaluelist(document.getElementById('zoommodevalue0'), selecteditems[axisbuttondefs[program_index][ZoomAxis][0][0]].subitems);
			document.getElementById('zoommodevalue0').value = axisbuttondefs[program_index][ZoomAxis][1][0];
			fillvaluelist(document.getElementById('zoommodevalue1'), selecteditems[axisbuttondefs[program_index][ZoomAxis][0][1]].subitems);
			document.getElementById('zoommodevalue1').value = axisbuttondefs[program_index][ZoomAxis][1][1];
			fillvaluelist(document.getElementById('zoommodevalue2'), selecteditems[axisbuttondefs[program_index][ZoomAxis][0][2]].subitems);
			document.getElementById('zoommodevalue2').value = axisbuttondefs[program_index][ZoomAxis][1][2];

			document.getElementById('rotatemodeaction0').value = axisbuttondefs[program_index][RotateAxis][0][0];
			document.getElementById('rotatemodeaction1').value = axisbuttondefs[program_index][RotateAxis][0][1];
			document.getElementById('rotatemodeaction2').value = axisbuttondefs[program_index][RotateAxis][0][2];

			fillvaluelist(document.getElementById('rotatemodevalue0'), selecteditems[axisbuttondefs[program_index][RotateAxis][0][0]].subitems);
			document.getElementById('rotatemodevalue0').value = axisbuttondefs[program_index][RotateAxis][1][0];
			fillvaluelist(document.getElementById('rotatemodevalue1'), selecteditems[axisbuttondefs[program_index][RotateAxis][0][1]].subitems);
			document.getElementById('rotatemodevalue1').value = axisbuttondefs[program_index][RotateAxis][1][1];
			fillvaluelist(document.getElementById('rotatemodevalue2'), selecteditems[axisbuttondefs[program_index][RotateAxis][0][2]].subitems);
			document.getElementById('rotatemodevalue2').value = axisbuttondefs[program_index][RotateAxis][1][2];

		}

		function select_new_button(button_index) {
			current_button_index = button_index;
			show_hwbutton_def(current_program_index, current_button_index);
		}

		function update_selected_program_items(select) {
			var selectedOption = select.options[select.selectedIndex];
			current_program_index = selectedOption.value;
			show_joystickmode_def(current_program_index);
			show_hwbutton_def(current_program_index, current_button_index);
		}

		function update_axisbutton_def(select, axis, actionValue, arrayIndex) {

			if (loadIsComplete) {
				let axisPrefix = "";
				if (axis == PanAxis) {
					axisPrefix = "pan";
				} else if (axis == TiltAxis) {
					axisPrefix = "tilt";
				} else if (axis == RotateAxis) {
					axisPrefix = "rotate";
				} else if (axis == ZoomAxis) {
					axisPrefix = "zoom";
				}

				if (axisPrefix != "") {
					let validArrayIndex = false;
					switch (arrayIndex) {
						case 0:
							axisbuttondefs[current_program_index][axis][0][0] = document.getElementById(axisPrefix + 'modeaction0').value;
							axisbuttondefs[current_program_index][axis][1][0] = document.getElementById(axisPrefix + 'modevalue0').value;
							validArrayIndex = true;
							break;

						case 1:
							axisbuttondefs[current_program_index][axis][1][1] = document.getElementById(axisPrefix + 'modevalue1').value;
							axisbuttondefs[current_program_index][axis][0][1] = document.getElementById(axisPrefix + 'modeaction1').value;
							validArrayIndex = true;
							break;

						case 2:
							axisbuttondefs[current_program_index][axis][0][2] = document.getElementById(axisPrefix + 'modeaction2').value;
							axisbuttondefs[current_program_index][axis][1][2] = document.getElementById(axisPrefix + 'modevalue2').value;
							validArrayIndex = true;
							break;

						default:
					}

					if (validArrayIndex) {
						let xhr = new XMLHttpRequest();

						xhr.open("GET", "/updatebutton?app=" + current_program_index + "&button=" + current_button_index + "&buttonType=" + axis +
							"&arrayIndex=" + arrayIndex + "&actionValue=" + actionValue +
							"&action=" + axisbuttondefs[current_program_index][axis][0][arrayIndex] +
							"&value=" + axisbuttondefs[current_program_index][axis][1][arrayIndex], true);

						xhr.send();

						console.log("updatebutton?app=" + current_program_index + "&button=" + current_button_index + "&buttonType=" + axis +
							"&arrayIndex=" + arrayIndex + "&actionValue=" + actionValue +
							"&action=" + axisbuttondefs[current_program_index][axis][0][arrayIndex] +
							"&value=" + axisbuttondefs[current_program_index][axis][1][arrayIndex]);
					}
				}
			}
		}


		function update_hwbutton_def(select, actionValue, arrayIndex) {

			let validArrayIndex = false;

			if (loadIsComplete) {
				switch (arrayIndex) {
					case 0:
						hwbuttondefs[current_program_index][current_button_index][0][0] = document.getElementById('joybuttonaction0').value;
						hwbuttondefs[current_program_index][current_button_index][1][0] = document.getElementById('joybuttonvalue0').value;
						validArrayIndex = true;
						break;

					case 1:
						hwbuttondefs[current_program_index][current_button_index][1][1] = document.getElementById('joybuttonvalue1').value;
						hwbuttondefs[current_program_index][current_button_index][0][1] = document.getElementById('joybuttonaction1').value;
						validArrayIndex = true;
						break;

					case 2:
						hwbuttondefs[current_program_index][current_button_index][0][2] = document.getElementById('joybuttonaction2').value;
						hwbuttondefs[current_program_index][current_button_index][1][2] = document.getElementById('joybuttonvalue2').value;
						validArrayIndex = true;
						break;

					default:
				}

				if (validArrayIndex) {
					let xhr = new XMLHttpRequest();

					xhr.open("GET", "/updatebutton?app=" + current_program_index + "&button=" + current_button_index + "&buttonType=3" +
						"&arrayIndex=" + arrayIndex + "&actionValue=" + actionValue +
						"&action=" + hwbuttondefs[current_program_index][current_button_index][0][arrayIndex] +
						"&value=" + hwbuttondefs[current_program_index][current_button_index][1][arrayIndex], true);

					xhr.send();

					console.log("updatebutton?app=" + current_program_index + "&button=" + current_button_index + "&buttonType=3" +
						"&arrayIndex=" + arrayIndex + "&actionValue=" + actionValue +
						"&action=" + hwbuttondefs[current_program_index][current_button_index][0][arrayIndex] +
						"&value=" + hwbuttondefs[current_program_index][current_button_index][1][arrayIndex]);
				}
			}
		}



		// Load Colors and then other configs
		fetch('config/general.json')
			.then((response) => {
				return response.json()
			})
			.then((data) => {

				document.getElementById("menubuttoncolor").value = data.menubuttoncolor;
				document.getElementById("functionbuttoncolor").value = data.functionbuttoncolor;
				document.getElementById("latchcolor").value = data.latchcolor;
				document.getElementById("background").value = data.background;
				document.getElementById("sleepenable").value = data.sleepenable;
				document.getElementById("usbcommsenable").value = data.usbcommsenable;
				document.getElementById("sleeptimer").value = data.sleeptimer;
				document.getElementById("beep").value = data.beep;
				document.getElementById("modifier1").value = data.modifier1;
				document.getElementById("modifier2").value = data.modifier2;
				document.getElementById("modifier3").value = data.modifier3;
				document.getElementById("helperdelay").value = data.helperdelay;
				document.getElementById("startup_menu").value = data.startup_menu;
			}).then(() => {
				getwificonfig();
			})
			.then(() => {
				getMenuConfig(0);
			})
			.then(() => {
				getCADParamsConfig();
			})
			.then(() => {
				getlogoconfig();
			})
			.catch((err) => {
				console.log(err)
			})
	</script>


</body>

</html>